<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Homepage</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            width: 250px;
            background-color: #343a40;
            padding: 10px;
            transition: width 0.3s;
            overflow-x: hidden;
        }
        .sidebar.collapsed {
            width: 0;
            padding: 0;
        }
        .sidebar .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .sidebar .nav-link {
            color: #fff;
        }
        .sidebar .nav-link:hover {
            background-color: #495057;
        }
        .collapse-button {
            background-color: #343a40;
            color: #fff;
            border: none;
            outline: none;
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
            transition: left 0.3s;
        }
        .content {
            margin-left: 250px;
            transition: margin-left 0.3s;
            min-height: calc(100vh - 60px); /* Adjust for footer height */
        }
        .content.collapsed {
            margin-left: 0;
        }
        footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            z-index: 1000;
        }
    </style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h4 class="text-white">M</h4>
        <button class="collapse-button" id="collapseButton">
            <span>&#9776;</span>
        </button>
    </div>
    <ul class="nav flex-column">
        <li class="nav-item">
            <a class="nav-link ajax-link" href="/materialTracking/entities" data-url="/materialTracking/entities">Barcode Label Generation</a>
        </li>
        <li class="nav-item">
            <a class="nav-link ajax-link" href="/materialTracking/segmentConfirmation" data-url="/materialTracking/segmentConfirmation">Segment Confirmation</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Generate Barcode</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Settings</a>
        </li>
    </ul>
</div>

<div class="content" id="content">
    <div class="container mt-5">
        <h1>Welcome to the Segment Tracking System</h1>
        <p>Use the sidebar to navigate through the application.</p>
    </div>
</div>

<!--&lt;!&ndash; Fixed Footer &ndash;&gt;-->
<!--<footer>-->
<!--    Powered by: Paramount Print Pack-->
<!--</footer>-->

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function() {
        // Apply saved state of the sidebar from localStorage
        if (localStorage.getItem('sidebarCollapsed') === 'true') {
            $('#sidebar').addClass('collapsed');
            $('#content').addClass('collapsed');
        }

        $('#collapseButton').on('click', function() {
            $('#sidebar').toggleClass('collapsed');
            $('#content').toggleClass('collapsed');

            // Save the current state of the sidebar in localStorage
            if ($('#sidebar').hasClass('collapsed')) {
                localStorage.setItem('sidebarCollapsed', 'true');
            } else {
                localStorage.setItem('sidebarCollapsed', 'false');
            }
        });

        $('.ajax-link').on('click', function(event) {
            event.preventDefault(); // Prevent the default link behavior

            var apiUrl = $(this).data('url'); // Get the API URL from data attribute

            $.ajax({
                url: apiUrl,
                method: 'GET',
                success: function(response) {
                    $('#content').html(response); // Load the returned HTML into the content area

                    // Update the browser URL
                    var newUrl = $(this).attr('href');
                    history.pushState(null, '', newUrl);
                }.bind(this), // Bind 'this' to preserve context for newUrl
                error: function() {
                    alert('An error occurred while loading the content.');
                }
            });
        });

        // Handle back/forward navigation
        window.onpopstate = function() {
            location.reload(); // Reload the page when navigating back/forward
        };
    });
</script>
</body>
</html>
